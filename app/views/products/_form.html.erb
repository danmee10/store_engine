<%= form_for(@product) do |f| %>
  <% if @product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>
      <ul>
        <% @product.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="form fields">
    <div class="field">
      <%= f.label :title %><br />
      <%= f.text_field :title %>
    </div>
    <div class="field">
      <%= f.label :description %><br />
      <%= f.text_field :description %>
    </div>
    <div class="field">
      <%= f.label :price %><br />
      <%= f.text_field :price %>
    </div>
    <div class="field">
      <%= f.label :photo %><br />
      <%= f.text_field :photo %>
    </div>
    <div class="field">
      <%= f.label :categories %><br />
      <%=collection_select(:product, :category_ids, Category.all, :id, :name, { selected: @product.category_ids }, { multiple: true, size: 4 })%>
    </div>
    <div class="field">
      <%= f.label :retire %>
      <%= f.check_box :retired %>
    </div>
    <br/>
    <br/>
    <div class="actions">
      <%= f.submit %>
    </div>
  </div>
<% end %>



<%if false%>

      <%= select_tag(:categories, categories.eachoptions_for_select())%>
      <p>Categories</p><p class="note">(hold shift to select multiple)</p>

      <select name="categories" size="#{@categories.length}" multiple="multiple">

        <% @categories.each do |category| %>
          <option value="<%=category%>"
             <%if @product.categories.any? { |cat| cat.name == category.name }%>
                  selected="selected"
             <%end%>><%=category.name%>
          </option>
        <%end%>
      </select>


      <%= f.text_field :category_list %>

  <%=collection_select(:product, :categories, Category.all, :id, :name, { selected: @product.category_ids }, { multiple: true, size: 4 })%>
<%end%>

